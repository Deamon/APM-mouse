function getRandomInt(e,t){return Math.floor(Math.random()*(t-e+1))+e}var supportedColors=["b-orange","b-purple","b-blue","b-green","b-red","b-lblue","b-dgreen","b-teal"],WrapperView=React.createClass({displayName:"WrapperView",getInitialState:function(){return{difficulty:"wtf?"}},getDifficultySets:function(){return{normal:{size:5,probability:.3,interval:3e3},hard:{size:4,probability:.45,interval:2500},"wtf?":{size:3,probability:.6,interval:2e3}}},handleDifficultyClick:function(e){this.setState({difficulty:e})},render:function(){var e=this.state.difficulty,t=this.getDifficultySets()[e];return React.createElement("div",null,React.createElement(BoardView,{difficulty:t}),React.createElement(NavView,{difficulty:e,onClick:this.handleDifficultyClick}))}}),NavView=React.createClass({displayName:"NavView",render:function(){var e=this,t=["normal","hard","wtf?"],a=t.map(function(t){var a=t===e.props.difficulty?"active":"";return React.createElement("li",{className:a},React.createElement("a",{href:"#",onClick:e.props.onClick.bind(this,t),key:t},t))});return React.createElement("nav",{className:"sidebar"},React.createElement("ul",null,a))}}),BoardView=React.createClass({displayName:"BoardView",getInitialState:function(e,t){var a={board:new Board(3,.6,2e3),showOverlay:!0,endGame:!0,startTime:Date.now()};return void 0!==e&&e===!1&&(a.isFirst=!1,a.duration=t),a},startGame:function(){this.setState({board:new Board(this.props.difficulty.size,this.props.difficulty.probability,this.props.difficulty.interval),totalClick:0,effectiveClick:0,showOverlay:!1,startGame:!0,startTime:Date.now(),endGame:!1})},handleGameOver:function(){var e=Math.round((Date.now()-this.state.startTime)/1e3);this.setState(this.getInitialState(!1,e))},handleCellClickClick:function(e,t){this.setState({totalClick:this.state.totalClick+1,effectiveClick:this.state.effectiveClick+(t?1:0)})},handleCellGenerate:function(){return this.state.board.checkCells()?(this.handleGameOver(),!0):void 0},render:function(){var e=this,t=this.props.difficulty;e.state.board=new Board(t.size,t.probability,t.interval);var a=e.state.board.cells.map(function(t,a){var i="row";return 0==a&&(i+=" first-row"),React.createElement("div",{className:i},t.map(function(t){return React.createElement(CellView,{tile:t,onCellClick:e.handleCellClickClick,onCellGenerate:e.handleCellGenerate,startGame:e.state.startGame,endGame:e.state.endGame})}))}),i="board";return i+=" size-"+this.props.difficulty.size,React.createElement("div",{className:i},React.createElement(ScoreBox,{totalClick:this.state.totalClick,effectiveClick:this.state.effectiveClick}),a,React.createElement(Overlay,{boardState:this.state,show:this.state.showOverlay,onStart:this.startGame}))}}),CellView=React.createClass({displayName:"CellView",getInitialState:function(){return{tile:this.props.tile}},handleClick:function(){var e=!1;this.state.tile.hasShown()&&(this.state.tile.setHide(),this.setState({tile:this.state.tile}),e=!0),this.props.onCellClick(this,e)},handleLifeCycle:function(){var e=this;e.state.intervalVariable=setInterval(function(){if(e.props.onCellGenerate(e.props.tile))for(var t=1;99999>t;t++)window.clearInterval(t);else e.props.tile.getRandomBoolean()&&(e.props.tile.setShow(),e.setState({tile:e.props.tile}))},e.props.tile.getRandomInterval())},render:function(){this.props.startGame&&this.handleLifeCycle(),this.props.endGame&&this.state.tile.setHide();var e="cell";return this.state.tile.hasShown()&&(e="tile "+supportedColors[getRandomInt(0,supportedColors.length-1)]),React.createElement("span",{className:e,onClick:this.handleClick},"")}}),Overlay=React.createClass({displayName:"Overlay",handleClick:function(){this.setState({show:!1}),this.props.onStart(this)},render:function(){var e=React.addons.classSet,t=this.props.boardState,a="Start",i="Let's do it",r="Ready ?",l="startButton b-lblue";void 0!==t.isFirst&&t.isFirst===!1&&(i="Time: "+t.duration+"s",console.log(t.effectiveClick/t.duration),r=(t.effectiveClick/t.duration*60).toFixed(2)+" EPM - ",r+=(t.totalClick/t.duration*60).toFixed(2)+" APM",a="Retry",l="startButton b-green");var s=e({overlay:!0,visible:this.props.show,hidden:!this.props.show});return React.createElement("div",{className:s},React.createElement("p",{className:"sub-message"},r),React.createElement("p",{className:"message"},i),React.createElement("button",{className:l,onClick:this.handleClick},a))}}),ScoreBox=React.createClass({displayName:"ScoreBox",render:function(){var e=this.props.effectiveClick/this.props.totalClick*100;e=e?Math.round(e):0;var t=void 0===this.props.totalClick?0:this.props.totalClick,a=void 0===this.props.effectiveClick?0:this.props.effectiveClick;return React.createElement("div",{className:"score-box"},React.createElement(ScoreCircle,{percentage:e,number:a,type:"Effective Clicks"}),React.createElement(ScoreCircle,{percentage:e,number:t,type:"Clicks"}),React.createElement(ScoreCircle,{percentage:e,number:e,type:"Percentage"}))}}),ScoreCircle=React.createClass({displayName:"ScoreCircle",render:function(){var e="c100 dark p"+this.props.percentage;this.props.percentage>60?e+=" green":this.props.percentage<=70&&this.props.percentage>45||(e+=" orange");var t="type "+this.props.type.split(" ").join("-"),a=this.props.number;return"Percentage"===this.props.type&&(a+="%"),React.createElement("div",{className:e},React.createElement("span",null,a),React.createElement("div",{className:"slice"},React.createElement("div",{className:"bar"}),React.createElement("div",{className:"fill"})),React.createElement("span",{className:t},this.props.type))}});React.render(React.createElement(WrapperView,null),document.getElementById("board"));